include( shift_generate_cxx )

set( CURRENT_DOMAIN_SOURCE_DIR ${CMAKE_CURRENT_SOURCE_DIR}/domains/cortex )
# Generate objects
set( SHIFT_GENERATED_OBJECTS
  Neuron Column MiniColumn Layer NeuronTypeAggregation )
set( SHIFT_GENERATED_DIR ${CMAKE_CURRENT_BINARY_DIR}/ShiFT )
file( MAKE_DIRECTORY ${SHIFT_GENERATED_DIR} )
foreach( GENERATED_OBJECT ${SHIFT_GENERATED_OBJECTS} )
  shift_generate_cxx(
    "Entity"
    ${GENERATED_OBJECT}
    ${CURRENT_DOMAIN_SOURCE_DIR}/entities.json
    ${SHIFT_GENERATED_DIR}
    )
  list( APPEND SHIFT_GENERATED_IMPL_FILES
    ${SHIFT_GENERATED_DIR}/shift_${GENERATED_OBJECT}.cpp )
  list( APPEND SHIFT_GENERATED_HEADER_FILES
    ${SHIFT_GENERATED_DIR}/shift_${GENERATED_OBJECT}.h )
endforeach( )

# Generate representations
set( SHIFT_GENERATED_OBJECTS
  NeuronRep Ring LayerRep NeuronTypeAggregationRep NeuronAggregationRep )
set( SHIFT_GENERATED_DIR ${CMAKE_CURRENT_BINARY_DIR}/ShiFT )
file( MAKE_DIRECTORY ${SHIFT_GENERATED_DIR} )
foreach( GENERATED_OBJECT ${SHIFT_GENERATED_OBJECTS} )
  shift_generate_cxx(
    "Representation"
    ${GENERATED_OBJECT}
    ${CURRENT_DOMAIN_SOURCE_DIR}/reps.json
    ${SHIFT_GENERATED_DIR}
    )
  list( APPEND SHIFT_GENERATED_IMPL_FILES
    ${SHIFT_GENERATED_DIR}/shift_${GENERATED_OBJECT}.cpp )
  list( APPEND SHIFT_GENERATED_HEADER_FILES
    ${SHIFT_GENERATED_DIR}/shift_${GENERATED_OBJECT}.h )
endforeach( )

set( NEUROSCHEME_SOURCES
  ${NEUROSCHEME_SOURCES}
  ${SHIFT_GENERATED_IMPL_FILES}
  ${CURRENT_DOMAIN_SOURCE_DIR}/ColumnItem.cpp
  ${CURRENT_DOMAIN_SOURCE_DIR}/ColumnRep.cpp
  ${CURRENT_DOMAIN_SOURCE_DIR}/LayerRep.cpp
  ${CURRENT_DOMAIN_SOURCE_DIR}/MiniColumnItem.cpp
  ${CURRENT_DOMAIN_SOURCE_DIR}/MiniColumnRep.cpp
  ${CURRENT_DOMAIN_SOURCE_DIR}/NeuronAggregationItem.cpp
  ${CURRENT_DOMAIN_SOURCE_DIR}/NeuronTypeAggregationItem.cpp
  ${CURRENT_DOMAIN_SOURCE_DIR}/NeuronTypeAggregationRep.cpp
  ${CURRENT_DOMAIN_SOURCE_DIR}/NeuronRep.cpp
  ${CURRENT_DOMAIN_SOURCE_DIR}/NeuronItem.cpp
  ${CURRENT_DOMAIN_SOURCE_DIR}/RepresentationCreator.cpp
  )

set( NEUROSCHEME_HEADERS
  ${NEUROSCHEME_SOURCES}
  ${SHIFT_GENERATED_HEADERS_FILES}
  ${CURRENT_DOMAIN_SOURCE_DIR}/Neuron.h
  ${CURRENT_DOMAIN_SOURCE_DIR}/ColumnItem.h
  ${CURRENT_DOMAIN_SOURCE_DIR}/ColumnRep.h
  ${CURRENT_DOMAIN_SOURCE_DIR}/LayerRep.h
  ${CURRENT_DOMAIN_SOURCE_DIR}/MiniColumnItem.h
  ${CURRENT_DOMAIN_SOURCE_DIR}/MiniColumnRep.h
  ${CURRENT_DOMAIN_SOURCE_DIR}/NeuronAggregationItem.h
  ${CURRENT_DOMAIN_SOURCE_DIR}/NeuronTypeAggregationItem.h
  ${CURRENT_DOMAIN_SOURCE_DIR}/NeuronTypeAggregationRep.h
  ${CURRENT_DOMAIN_SOURCE_DIR}/NeuronRep.h
  ${CURRENT_DOMAIN_SOURCE_DIR}/NeuronItem.h
  ${CURRENT_DOMAIN_SOURCE_DIR}/RepresentationCreator.h
  )

set( NEUROSCHEME_SOURCES ${NEUROSCHEME_SOURCES} PARENT_SCOPE )
set( NEUROSCHEME_HEADERS ${NEUROSCHEME_HEADERS} PARENT_SCOPE )
